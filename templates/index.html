<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Add this in the <head> section -->
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stock Analysis</title>
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
      }

      h1 {
        font-size: 3rem;
        margin-bottom: 2rem;
        color: #333;
      }

      form {
        text-align: center;
      }

      label {
        font-size: 1.5rem;
        display: block;
        margin-bottom: 1rem;
      }
      #ticker-input {
        width: 600px;
        height: 60px;
        font-size: 1.5rem;
        padding: 0.5rem;
        margin-bottom: 1rem;
        border: 2px solid #ccc;
        border-radius: 5px;
      }
      #another-ticker-input {
        width: 600px; /* Increased width */
        height: 60px; /* Increased height */
        font-size: 1.5rem; /* Increased font size */
        padding: 0.5rem;
        margin-top: 1rem;
        border: 2px solid #ccc;
        border-radius: 5px;
      }

      button {
        font-size: 1.5rem;
        padding: 0.8rem 2rem;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      button:hover {
        background-color: #0056b3;
      }

      #suggestions-list {
        width: 600px;
        list-style: none;
        padding: 0;
        margin: 0;
        text-align: left;
      }

      #suggestions-list li {
        padding: 0.5rem;
        font-size: 1.2rem;
        cursor: pointer;
        border-bottom: 1px solid #eee;
      }

      #suggestions-list li:hover {
        background-color: #f0f0f0;
      }
      #suggestions-list li:hover {
        background-color: #f0f0f0;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="{{ url_for('home') }}">Stock Analysis</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('home') }}">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#analysis">Analysis</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#about">About</a>
          </li>
        </ul>
      </div>
    </nav>

    <h1>Stock Analysis</h1>
    <form action="/analyze" method="post">
      <label for="ticker-input">Enter Stock Ticker:</label>
      <input
        type="text"
        id="ticker-input"
        name="ticker"
        placeholder="Enter company name or ticker"
        autocomplete="off"
        required
      />
      <ul id="suggestions-list"></ul>
      <button type="submit">Analyze</button>
    </form>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function () {
        $("#ticker-input").on("input", function () {
          let query = $(this).val();
          if (query.length > 1) {
            $.get("/suggest", { query: query }, function (data) {
              $("#suggestions-list").empty();
              $.each(data.suggestions, function (name, ticker) {
                $("#suggestions-list").append(
                  `<li data-ticker="${ticker}">${name} (${ticker})</li>`
                );
              });
            });
          } else {
            $("#suggestions-list").empty();
          }
        });

        // Handle suggestion click
        $(document).on("click", "#suggestions-list li", function () {
          // Set the input value to the ticker symbol
          $("#ticker-input").val($(this).data("ticker"));
          $("#suggestions-list").empty();
        });
      });
    </script>
  </body>
</html>
